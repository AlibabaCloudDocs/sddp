# 自定义规则

敏感数据保护（SDDP）支持自定义异常事件检测规则并提供告警。SDDP会根据您自定义的异常事件规则抓取对应的异常事件日志数据。本文档介绍了如何创建异常事件自定义规则。

SDDP支持根据系统内置的规则（更多信息，请参见[内置的异常检测规则](/cn.zh-CN/常见问题/SDDP内置的异常检测规则.md)）和用户自定义规则检测异常事件并提供告警。

**说明：** 目前，仅OSS、MaxCompute和RDS支持自定义异常事件检测规则，其余云产品仅支持使用系统内置的规则检测异常事件。

## 操作步骤

1.  登录[敏感数据保护控制台](https://yundun.console.aliyun.com/?p=sddp#/overview)。

2.  在左侧导航栏，选择**数据安全实验室** \> **自定义规则**。

3.  单击**新增规则**。

4.  在新增规则页面配置自定义规则相关参数。

    ![新增规则](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2765858951/p66451.png)

    您可以参考以下表格配置自定义规则的参数。

    |参数|说明|
    |--|--|
    |**规则名称**|自定义异常事件检测规则的名称，建议输入有实际意义的名称以便有效识别该规则。|
    |**风险级别**|从下拉列表中选择该异常事件规则的风险等级，可选以下3种风险等级：     -   **高**
    -   **中**
    -   **低** |
    |**资产类型**|异常事件规则检测的资产类型，可选以下3种资产：     -   **OSS**
    -   **MaxCompute**
    -   **RDS** |
    |**过滤条件**|根据实际需要配置过滤条件，指定需要检测的异常事件。每个过滤条件之间是和（AND）关系。例如：过滤出OSS产品中**识别结果**为**身份证（中国内地）**的日志。|
    |**添加**|单击**添加**，完成过滤条件的配置。支持添加多条过滤条件。|
    |**告警条件**|设置告警检测的时间单位和告警产生的条件。SDDP基于上一步中过滤的数据进行异常检测，在自定义时间段内满足告警条件，将触发异常事件告警。 **说明：** 告警条件中的**任何UA**是指任何浏览器的UserAgent。UserAgent的信息包括硬件平台、系统软件、应用软件和用户个人偏好，通过UA可以分析出浏览器名称、浏览器版本号、渲染引擎、操作系统。告警条件选择了**任何UA**，可以抓取UserAgent中的相应异常事件。 |

5.  单击**确定**，完成异常事件规则的创建。

    异常事件规则创建完成后，您可以在**自定义规则**列表中查看该异常事件检测规则的开启状态、命中结果和详情信息，或编辑该检测规则。

    ![异常事件规则](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2765858951/p66473.png)

    **说明：** 已创建异常事件规则的**状态**默认为**开启**。您也可在**自定义规则**列表中手动关闭该规则。关闭该规则后，SDDP将不会再用该规则项进行检测。


创建并开启异常事件规则后，SDDP将在1小时左右同步检测结果，您可在异常事件处理页面查看相关数据。更多信息，请参见[异常事件处理](/cn.zh-CN/用户指南/数据安全实验室/异常事件处理.md)。

![异常事件](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2765858951/p66454.png)

